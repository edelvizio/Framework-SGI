<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Framework SGI (INPI) – Protótipo</title>
  <style>
    :root{ --bg:#0b1020;--panel:#101935;--muted:#8792a2;--text:#eef2ff;--accent:#7aa2ff;--accent-2:#64d2ff;--ok:#48c774;--warn:#f2b705;--err:#ff5c7c;--chip:#1c254a }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui;background:#0b1020;color:var(--text)}
    header{position:sticky;top:0;background:#0b1020;border-bottom:1px solid #1d274d}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{margin:0;font-size:22px}
    h2{font-size:18px;margin:18px 0 8px}
    .grid{display:grid;gap:12px}
    @media(min-width:900px){.grid.cols-2{grid-template-columns:1fr 1fr}}
    @media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .card{background:var(--panel);border:1px solid #1d274d;border-radius:12px;padding:16px}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap}
    button,.btn{border:1px solid #2b3870;background:#172149;color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:8px;border:1px solid #2b3870;background:#0f1633;color:var(--text)}
    label{display:block;margin:8px 0 6px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{background:#1c254a;border:1px solid #2b3870;border-radius:999px;padding:6px 10px;font-size:12px}
    nav.tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}
    nav.tabs button[aria-current="true"]{background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#081229;border:0}
    .kpis{display:grid;gap:8px}
    @media(min-width:700px){.kpis{grid-template-columns:repeat(2,1fr)}}
    table{width:100%;border-collapse:collapse;border:1px solid #27336a;border-radius:12px;overflow:hidden}
    th,td{padding:10px;border-bottom:1px solid #27336a}
    th{background:#121c3f;text-align:left}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <noscript>
    <div style="background:#ffdfdf;color:#420;padding:12px;text-align:center;font-family:system-ui;">
      Habilite JavaScript para usar o Framework SGI.
    </div>
  </noscript>

  <header>
    <div class="wrap">
      <h1>Framework SGI – INPI</h1>
      <div style="margin-top:6px;font-size:12px;opacity:.85">Status do script: <span id="jsStatus">carregando...</span></div>
    </div>
  </header>

  <main class="wrap grid cols-2">
    <section class="card">
      <h2>Como usar</h2>
      <div class="toolbar" role="group" aria-label="Ações">
        <button id="btnSave">Salvar</button>
        <button id="btnLoad">Recarregar</button>
        <button id="btnExport">Exportar JSON</button>
        <label class="btn" for="fileImport">Importar JSON</label>
        <input id="fileImport" class="sr-only" type="file" accept="application/json">
        <button id="btnPrint">Imprimir / PDF</button>
        <button id="btnClear">Limpar tudo</button>
      </div>
      <p class="chips">
        <span class="chip">ISO 56002 (28 itens)</span>
        <span class="chip">TRIZ – MPI</span>
        <span class="chip">Teoria da Mudança</span>
        <span class="chip">ISO 56007</span>
        <span class="chip">ISO 56008</span>
      </p>
    </section>

    <section class="card">
      <h2>Relatório rápido</h2>
      <div class="toolbar"><button id="btnBuild">Atualizar relatório</button></div>
      <div id="report"></div>
    </section>

    <section class="card" style="grid-column:1/-1">
      <nav class="tabs" id="tabs" aria-label="Etapas">
        <button data-tab="e1" aria-current="true">Etapa 1 – Diagnóstico (ISO 56002)</button>
        <button data-tab="e2">Etapa 2 – Ideação (TRIZ / ISO 56007)</button>
        <button data-tab="e3">Etapa 3 – Tratamento das Incertezas</button>
        <button data-tab="e4">Etapa 4 – KPIs e Validação (ISO 56008)</button>
      </nav>

      <div id="e1" class="tab card">
        <h3>Etapa 1 – Diagnóstico & Priorização</h3>
        <div class="grid cols-3">
          <div><label for="org">Unidade/Setor</label><input id="org" placeholder="Ex.: DIPCT, SRPCT"></div>
          <div><label for="e1_ini">Início (Etapa 1)</label><input id="e1_ini" type="date"></div>
          <div><label for="e1_fim">Fim (Etapa 1)</label><input id="e1_fim" type="date"></div>
        </div>
        <label for="itensISO">Itens críticos ISO 56002</label>
        <input id="itensISO" placeholder="Ex.: 4.3 Planejamento, 7.1 Recursos...">
        <label for="justISO">Justificativa / evidências</label>
        <textarea id="justISO" rows="3"></textarea>
        <label for="ahpNotas">Notas de priorização (AHP/Fuzzy)</label>
        <textarea id="ahpNotas" rows="3"></textarea>
      </div>

      <div id="e2" class="tab card" hidden>
        <h3>Etapa 2 – Ideação (TRIZ / ISO 56007)</h3>
        <div class="grid cols-2">
          <div><label for="e2_ini">Início (Etapa 2)</label><input id="e2_ini" type="date"></div>
          <div><label for="e2_fim">Fim (Etapa 2)</label><input id="e2_fim" type="date"></div>
        </div>
        <label for="defProblema">Formulação do problema</label>
        <textarea id="defProblema" rows="3"></textarea>
        <label for="recursos">Recursos disponíveis</label>
        <textarea id="recursos" rows="3"></textarea>
        <label for="heuristicas">Heurísticas / princípios (MPI/TRIZ)</label>
        <textarea id="heuristicas" rows="3"></textarea>
        <label for="ideias">Ideias geradas</label>
        <textarea id="ideias" rows="3"></textarea>
      </div>

      <div id="e3" class="tab card" hidden>
        <h3>Etapa 3 – Tratamento das Incertezas</h3>
        <div class="grid cols-2">
          <div><label for="e3_ini">Início (Etapa 3)</label><input id="e3_ini" type="date"></div>
          <div><label for="e3_fim">Fim (Etapa 3)</label><input id="e3_fim" type="date"></div>
        </div>
        <p class="help">Responda às 9 perguntas para cada incerteza. Use o botão para adicionar registros.</p>
        <div class="toolbar"><button id="addInc">Adicionar incerteza</button></div>
        <div id="incList" class="grid"></div>
      </div>

      <div id="e4" class="tab card" hidden>
        <h3>Etapa 4 – KPIs, Metas e Validação (ISO 56008)</h3>
        <div class="grid cols-2">
          <div><label for="e4_ini">Início (Etapa 4)</label><input id="e4_ini" type="date"></div>
          <div><label for="e4_fim">Fim (Etapa 4)</label><input id="e4_fim" type="date"></div>
        </div>
        <div class="toolbar"><button id="addKPI">Adicionar KPI</button></div>
        <div class="kpis" id="kpiList"></div>
      </div>
    </section>
  </main>

  <footer class="wrap" style="margin:32px auto 60px;">
    <small>v0.4.1 · <span id="jsStatusFoot">carregando...</span></small>
  </footer>

  <script src="app.js" defer></script>
</body>
</html>
